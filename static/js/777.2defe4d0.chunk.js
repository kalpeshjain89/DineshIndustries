"use strict";(self.webpackChunkDinesh_Industries=self.webpackChunkDinesh_Industries||[]).push([[777],{9777:function(e,t,s){s.r(t),s.d(t,{default:function(){return P}});var n=s(3433),r=s(4165),l=s(5861),a=s(9439),i=s(2791),o=s(7689),c=s(1087),u=s(6907),d=s(7365),f=s(890),p=s(1614),m=s(4554),x=s(4925),v=s(5022),g=s(8096),h=s(7391),Z=s(8583),b=s(6151),j=s(168),S=s(184),y=i.lazy((function(){return Promise.all([s.e(87),s.e(957)]).then(s.bind(s,3957))})),w=function(){var e=(0,o.s0)(),t=(0,o.UO)().route,s=(0,c.lr)(),w=(0,a.Z)(s,1)[0],P=(0,i.useState)(JSON.parse(sessionStorage.getItem("allProducts"))||[]),C=(0,a.Z)(P,2),k=C[0],I=C[1],A=(0,i.useState)([]),z=(0,a.Z)(A,2),D=z[0],L=z[1],T=(0,i.useState)(sessionStorage.getItem("productsPerPage")||6),N=(0,a.Z)(T,2),B=N[0],O=N[1],F=(0,i.useState)(""),E=(0,a.Z)(F,2),H=E[0],U=E[1],W=i.useState([]),_=(0,a.Z)(W,2),q=_[0],G=_[1],J=i.useState("allProducts"),K=(0,a.Z)(J,2),Q=K[0],R=K[1],V=i.useState([]),Y=(0,a.Z)(V,2),M=Y[0],X=Y[1],$=i.useState("all"),ee=(0,a.Z)($,2),te=ee[0],se=ee[1],ne=(0,i.useState)("nameAsc"),re=(0,a.Z)(ne,2),le=re[0],ae=re[1],ie=i.useState(""),oe=(0,a.Z)(ie,2),ce=oe[0],ue=oe[1],de=i.useState(!0),fe=(0,a.Z)(de,2),pe=fe[0],me=fe[1],xe=function(){var e=(0,l.Z)((0,r.Z)().mark((function e(){var t,s,n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=null,e.next=4,(0,d.Z)("/".concat("1VfKeWPYPQf_E4uwuK4jGkaURpG71w8Hnba8veTSqcAU","/values/products"));case 4:(s=e.sent).data.values.shift(),console.log("response.data.values ",s.data.values),t=s.data.values.map((function(e,t){if(e.length){var s,n,r,l,a,i,o,c=null===(s=e[1])||void 0===s?void 0:s.split(/[.\r?\n]/).filter((function(e){return e})),u=null===(n=e[2])||void 0===n?void 0:n.split(/[.\r?\n]/).filter((function(e){return e})),d=null===(r=e[3])||void 0===r?void 0:r.split(/[.\r?\n]/).filter((function(e){return e})),f=null===(l=e[9])||void 0===l?void 0:l.split(/[\r?\n]/).filter((function(e){return e})),p=null===(a=e[10])||void 0===a?void 0:a.split(/[\r?\n]/).filter((function(e){return e})),m=null===(i=e[11])||void 0===i?void 0:i.split(/[.\r?\n]/).filter((function(e){return e}));return console.log("allThumbnailsPrices ",m),console.log("allThumbnailsSrc ",f),console.log("allThumbnailsAlt ",p),{name:e[0],features:null===d||void 0===d?void 0:d.map((function(e){return e.trim()})),price:e[5],link:e[4],categories:null===c||void 0===c?void 0:c.map((function(e){return e.trim().toLowerCase()})),subCategories:null===u||void 0===u?void 0:u.map((function(e){return e.trim().toLowerCase()})),keywords:null===(o=e[6])||void 0===o?void 0:o.split(" "),mainImg:{src:e[7],alt:e[8]},thumbnails:null===f||void 0===f?void 0:f.map((function(t,s){var n,r;return{src:null===t||void 0===t?void 0:t.trim(),alt:null===(n=p[s])||void 0===n?void 0:n.trim(),price:m?null===(r=m[s])||void 0===r?void 0:r.trim():e[5]}}))}}return null})),(n=t.filter((function(e){return null!=e}))).length&&(sessionStorage.setItem("allProducts",JSON.stringify(n)),I(n),he(n),ve(n),ge(n)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),ve=function(e){var t=[];e.map((function(e){t.push.apply(t,(0,n.Z)(e.categories))})),G((0,n.Z)(new Set(t)))},ge=function(e){var t=[];e.map((function(e){t.push.apply(t,(0,n.Z)(e.subCategories))})),X((0,n.Z)(new Set(t)))},he=function(e){var s=[],n="All products";if(t){var r=t.replaceAll("-"," ");s=e.filter((function(e){return e.categories.includes(r)})),n=r}else if(w.get("search")){var l=w.get("search");s=e.filter((function(e){return e.name.toLowerCase().includes(l.toLowerCase())})),n=l}else s=e;L(s),U(n),me(!1)},Ze=function(){var e=(0,l.Z)((0,r.Z)().mark((function e(){var s,n,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=0,n=(new Date).getTime(),null!=(l=sessionStorage.getItem("productsSession"))){e.next=10;break}return sessionStorage.setItem("productsSession",n),e.next=7,xe();case 7:console.log("session set"),e.next=21;break;case 10:if(!(n-l>60*s*60*1e3)){e.next=18;break}return sessionStorage.removeItem("productsSession"),sessionStorage.setItem("productsSession",n),e.next=15,xe();case 15:console.log("session refreshed"),e.next=21;break;case 18:console.log("session exists"),console.log("allProducts from session ",k),k.length&&(he(k),ve(k),ge(k),t&&R(t.replaceAll("-"," ")));case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){Ze()}),[]),(0,i.useEffect)((function(){k.length&&he(k)}),[t,w]);var be=function(t,s){if("category"==s){var n="allProducts"==t.target.value?"":t.target.value.replaceAll(" ","-");R(t.target.value),se("all"),e("/products/".concat(n))}else{var r=k.filter((function(e){return"allProducts"==Q?e:e.categories.includes(Q)}));r=r.filter((function(e){return"all"==t.target.value?e:e.subCategories.includes(t.target.value)})),se(t.target.value),L(r)}};return(0,S.jsxs)("div",{children:[(0,S.jsxs)(u.ql,{children:[(0,S.jsx)("title",{children:"Dinesh Industries - Our Products"}),(0,S.jsx)("meta",{name:"description",content:"Dinesh Industries - Our Products"})]}),(0,S.jsxs)(p.Z,{maxWidth:"xl",className:"products-page",children:[(0,S.jsxs)(m.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"start",flexDirection:{xs:"column",sm:"row"},pt:{xs:2,sm:2},px:{xs:0},pb:2},children:[(0,S.jsx)(f.Z,{variant:"h1",sx:{textAlign:{sm:"left"},fontSize:{xs:"1.5em",md:"2em"},flexBasis:{md:"70%"},textTransform:"uppercase"},children:H}),(0,S.jsx)(g.Z,{size:"small",sx:{flexBasis:{md:"30%"},display:{xs:"none",md:"flex"}},children:(0,S.jsx)(h.Z,{id:"outlined-search",label:"Search products on this page",type:"search",size:"small",onInput:function(e){var t=(D.length?D:k).filter((function(t){return t.name.toLowerCase().includes(e.target.value.toLowerCase())}));""===e.target.value?he(k):t.length?L(t):(L([]),ue("No products were found for '".concat(e.target.value,"'. Please refine your search and try again.")))}})})]}),(0,S.jsxs)(m.Z,{sx:{display:"flex",width:{xs:"100%",sm:"100%"},flexDirection:"row",mt:{xs:0,sm:2},mb:{xs:2},justifyContent:"space-between"},children:[(0,S.jsxs)(g.Z,{size:"small",sx:{flexBasis:{xs:"48%",sm:"38%"},display:{xs:"none",sm:"flex"}},children:[(0,S.jsx)(x.Z,{id:"select-label",children:"Filter products by category"}),(0,S.jsxs)(Z.Z,{labelId:"select-label",id:"demo-select-small",value:Q,onChange:function(e){return be(e,"category")},label:"Filter products by category",children:[(0,S.jsx)(v.Z,{value:"allProducts",children:"All Products"}),q.length>0&&q.map((function(e,t){return(0,S.jsx)(v.Z,{value:e,sx:{textTransform:"capitalize"},children:e},t)}))]})]}),(0,S.jsxs)(g.Z,{size:"small",sx:{flexBasis:{xs:"48%",sm:"38%"}},children:[(0,S.jsx)(x.Z,{id:"select-label",children:"Filter products by sub category"}),(0,S.jsxs)(Z.Z,{labelId:"select-label",id:"demo-select-small",value:te,onChange:function(e){return be(e,"subCategory")},label:"Filter products by sub category",children:[(0,S.jsx)(v.Z,{value:"all",children:"All sub categories"}),M.length>0&&M.map((function(e,t){return(0,S.jsx)(v.Z,{value:e,sx:{textTransform:"capitalize"},children:e},t)}))]})]}),(0,S.jsxs)(g.Z,{size:"small",sx:{flexBasis:{md:"20%"}},children:[(0,S.jsx)(x.Z,{id:"select-label",children:"Sort products by"}),(0,S.jsxs)(Z.Z,{labelId:"select-label",id:"demo-select-small",value:le,onChange:function(e){var t,s=e.target.value;switch(s){case"nameAsc":t=D.sort((function(e,t){if(e.name<t.name)return-1}));break;case"nameDesc":t=D.sort((function(e,t){if(e.name>t.name)return-1}));break;case"priceAsc":t=D.sort((function(e,t){if(e.price<t.price)return-1}));break;case"priceDesc":t=D.sort((function(e,t){if(e.price>t.price)return-1}))}ae(s),L(t)},label:"Sort products by",children:[(0,S.jsx)(v.Z,{value:"nameAsc",children:"Name - A to Z"}),(0,S.jsx)(v.Z,{value:"nameDesc",children:"Name - Z to A"}),(0,S.jsx)(v.Z,{value:"priceAsc",children:"Price - Low to High"}),(0,S.jsx)(v.Z,{value:"priceDesc",children:"Price - High to Low"})]})]})]}),(0,S.jsx)(m.Z,{sx:{display:"flex",gap:{xs:"14px",sm:"25px",md:"16px",lg:"30px"},mb:2,flexWrap:{xs:"wrap"}},children:pe?(0,S.jsx)(j.Z,{message:"Loading products..."}):D.length>0?D.slice(0,B).map((function(e){return(0,S.jsx)(y,{product:e},e.name)})):(0,S.jsx)(f.Z,{variant:"body1",sx:{fontSize:{xs:"1em",md:"1.25em"}},children:ce})}),(0,S.jsx)(m.Z,{sx:{display:"flex",justifyContent:"center",my:3},children:B<(null===D||void 0===D?void 0:D.length)&&(0,S.jsx)(b.Z,{variant:"contained",size:"large",onClick:function(){sessionStorage.setItem("productsPerPage",B+6),O(B+6)},children:"Show more products"})})]})]})},P=i.memo(w)}}]);
//# sourceMappingURL=777.2defe4d0.chunk.js.map